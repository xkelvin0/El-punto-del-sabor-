const productos={"wantan-frito":{nombre:"Wantan Frito",imagen:"imagenes/wantanfrito.jpeg",precio:"S/ 8.00",descripcion:"Crujientes wantanes fritos, rellenos de una mezcla jugosa de carne de cerdo y especias, acompaÃ±ados de nuestra exclusiva salsa agridulce. Un clÃ¡sico de la cocina chifa que no puede faltar en tu mesa (6 unidades).",ingredientes:[{nombre:"Masa de wantÃ¡n",alergenos:["gluten"]},{nombre:"Carne de cerdo molida",alergenos:[]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite vegetal para freÃ­r",alergenos:[]},{nombre:"Salsa agridulce (agua, azÃºcar, vinagre, salsa de tomate, pimienta)",alergenos:[]}],"alÃ©rgenos":["gluten","soya"]},"arroz-chaufa":{nombre:"Arroz Chaufa",imagen:"imagenes/chaufa.jpeg",precio:"S/ 15.00",descripcion:"Tradicional arroz frito estilo chino-peruano preparado con huevo, cebolla china, ajo, jengibre, salsa de soya y trozos de pollo. Un clÃ¡sico de la gastronomÃ­a chifa que no puede faltar.",ingredientes:[{nombre:"Arroz cocido",alergenos:[]},{nombre:"Pechuga de pollo",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Cebollita china para decorar",alergenos:[]}],"alÃ©rgenos":["huevo","gluten","soya","sÃ©samo"]},"siu-mai":{nombre:"Siu Mai",imagen:"imagenes/siumai.jpeg",precio:"S/ 12.00",descripcion:"Deliciosos bocaditos de carne de cerdo y camarones cocidos al vapor, envueltos en una fina masa de wantÃ¡n. Una explosiÃ³n de sabores en cada bocado (6 unidades).",ingredientes:[{nombre:"Masa de wantÃ¡n",alergenos:["gluten"]},{nombre:"Carne de cerdo molida",alergenos:[]},{nombre:"Camarones",alergenos:["mariscos"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]},{nombre:"Zanahoria rallada",alergenos:[]}],"alÃ©rgenos":["gluten","soya","mariscos","sÃ©samo"]},aeropuerto:{nombre:"Aeropuerto",imagen:"imagenes/aeropuerto.png",precio:"S/ 18.00",descripcion:"La combinaciÃ³n perfecta de arroz chaufa y tallarÃ­n saltado en un mismo plato. Un festÃ­n de sabores y texturas que te harÃ¡ volar de placer.",ingredientes:[{nombre:"Arroz cocido",alergenos:[]},{nombre:"Fideos chinos",alergenos:["gluten"]},{nombre:"Pollo",alergenos:[]},{nombre:"Carne de res",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Verduras salteadas",alergenos:[]}],"alÃ©rgenos":["gluten","huevo","soya","sÃ©samo"]},"chaufa-carne":{nombre:"Chaufa de Carne",imagen:"imagenes/chaufacarne.png",precio:"S/ 18.00",descripcion:"Nuestro exquisito arroz chaufa preparado con tiernos trozos de lomo fino, huevo, cebolla china y un toque de ajonjolÃ­. Una versiÃ³n mejorada del clÃ¡sico chaufa con el sabor Ãºnico de la carne de res.",ingredientes:[{nombre:"Arroz cocido",alergenos:[]},{nombre:"Lomo fino de res",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Cebollita china y ajonjolÃ­ para decorar",alergenos:["sÃ©samo"]}],"alÃ©rgenos":["huevo","gluten","soya","sÃ©samo"]},"chaufa-chancho":{nombre:"Arroz Chaufa de Chancho",imagen:"imagenes/chaufachancho.jpeg",precio:"S/ 20.00",descripcion:"Una deliciosa variante de nuestro arroz chaufa, preparado con jugosos trozos de carne de cerdo, huevo, cebolla china y un toque de salsa de ostiÃ³n. Un plato que conquista por su sabor Ãºnico.",ingredientes:[{nombre:"Arroz cocido",alergenos:[]},{nombre:"Carne de cerdo",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Salsa de ostiÃ³n",alergenos:["moluscos"]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Cebollita china para decorar",alergenos:[]}],"alÃ©rgenos":["huevo","gluten","soya","moluscos","sÃ©samo"]},chijaukay:{nombre:"Chijaukay",imagen:"imagenes/chijaukai2.jpeg",precio:"S/ 22.00",descripcion:"Crujiente pollo frito baÃ±ado en nuestra exquisita salsa de soya y ostiÃ³n. Un plato que combina la textura crujiente del pollo con el sabor umami de la salsa.",ingredientes:[{nombre:"Pechuga de pollo",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Harina de trigo",alergenos:["gluten"]},{nombre:"AlmidÃ³n de maÃ­z",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Salsa de ostiÃ³n",alergenos:["moluscos"]},{nombre:"AzÃºcar",alergenos:[]},{nombre:"Aceite vegetal para freÃ­r",alergenos:[]},{nombre:"Cebollita china para decorar",alergenos:[]}],"alÃ©rgenos":["huevo","gluten","soya","moluscos"]},"kamlu-wantan":{nombre:"Kamlu Wantan",imagen:"imagenes/kamluwantan.png",precio:"S/ 24.00",descripcion:"Deliciosos wantanes fritos acompaÃ±ados de una mezcla de pollo, cerdo y verduras en una irresistible salsa tamarindo. Un plato que equilibra perfectamente lo dulce y lo salado.",ingredientes:[{nombre:"Masa de wantÃ¡n frita",alergenos:["gluten"]},{nombre:"Pechuga de pollo",alergenos:[]},{nombre:"Carne de cerdo molida",alergenos:[]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Zanahoria",alergenos:[]},{nombre:"Pimiento rojo y verde",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de tamarindo",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]},{nombre:"ManÃ­ tostado",alergenos:["manÃ­"]},{nombre:"Aceite vegetal para freÃ­r",alergenos:[]}],"alÃ©rgenos":["gluten","soya","sÃ©samo","manÃ­"]},"pollo-enrollado":{nombre:"Pollo Enrollado",imagen:"imagenes/pollo enrollado.jpeg",precio:"S/ 24.00",descripcion:"Tierna pechuga de pollo rellena de verduras y especias, enrollada y cocida a la perfecciÃ³n, servida con nuestra exclusiva salsa de ostiÃ³n. Un plato que destaca por su presentaciÃ³n y sabor.",ingredientes:[{nombre:"Pechuga de pollo deshuesada",alergenos:[]},{nombre:"Zanahoria",alergenos:[]},{nombre:"Vainita china",alergenos:[]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de ostiÃ³n",alergenos:["moluscos"]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]},{nombre:"Hilo de cocina",alergenos:[]},{nombre:"Cebollino para decorar",alergenos:[]}],"alÃ©rgenos":["gluten","soya","moluscos","sÃ©samo"]},"sopa-wantan":{nombre:"Sopa Wantan",imagen:"imagenes/sopawantan.png",precio:"S/ 12.00",descripcion:"Una reconfortante sopa de origen chino que combina caldo de pollo casero con jugosos wantanes rellenos de carne de cerdo y especias. AcompaÃ±ada de finas lÃ¡minas de cebolla china y brotes de soya.",ingredientes:[{nombre:"Masa de wantÃ¡n",alergenos:["gluten"]},{nombre:"Carne de cerdo molida",alergenos:[]},{nombre:"Camarones picados",alergenos:["mariscos"]},{nombre:"Caldo de pollo",alergenos:[]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]},{nombre:"Col china",alergenos:[]},{nombre:"Cebollino picado",alergenos:[]}],"alÃ©rgenos":["gluten","soya","mariscos","sÃ©samo"]},"sopa-fuchifu":{nombre:"Sopa Fuchifu",imagen:"imagenes/fuchifu.png",precio:"S/ 15.00",descripcion:"Una sopa espesa y cremosa preparada con caldo de pollo, huevo batido, finas tiras de pollo, champiÃ±ones y fideos chinos. Aderezada con un toque de vinagre y pimienta blanca.",ingredientes:[{nombre:"Caldo de pollo",alergenos:[]},{nombre:"Huevo cocido",alergenos:["huevo"]},{nombre:"Pechuga de pollo en tiras",alergenos:[]},{nombre:"ChampiÃ±ones rebanados",alergenos:[]},{nombre:"Fideos chinos",alergenos:["gluten"]},{nombre:"Maicena (para espesar)",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Vinagre de arroz",alergenos:[]},{nombre:"Pimienta blanca",alergenos:[]},{nombre:"Cebollino picado",alergenos:[]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]}],"alÃ©rgenos":["huevo","gluten","sÃ©samo"]},"pollo-tipakay":{nombre:"Pollo Tipakay",imagen:"imagenes/tipakay.png",precio:"S/ 22.00",descripcion:"Crujientes trozos de pollo frito baÃ±ados en nuestra exclusiva salsa agridulce, acompaÃ±ados de pimientos salteados y anacardos tostados.",ingredientes:[{nombre:"Pechuga de pollo en cubos",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Harina de trigo",alergenos:["gluten"]},{nombre:"AlmidÃ³n de maÃ­z",alergenos:[]},{nombre:"Pimiento rojo y verde",alergenos:[]},{nombre:"Cebolla morada",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Vinagre de arroz",alergenos:[]},{nombre:"Miel",alergenos:[]},{nombre:"Anacardos tostados",alergenos:["frutos secos"]},{nombre:"Aceite vegetal para freÃ­r",alergenos:[]},{nombre:"Semillas de sÃ©samo para decorar",alergenos:["sÃ©samo"]}],"alÃ©rgenos":["huevo","gluten","soya","frutos secos","sÃ©samo"]},salvaje:{nombre:"Salvaje",imagen:"imagenes/salvaje.png",precio:"S/ 18.00",descripcion:"VersiÃ³n especial del clÃ¡sico arroz chaufa, preparado con una selecciÃ³n de verduras chinas salteadas al wok, huevo y mezcla secreta de especias.",ingredientes:[{nombre:"Arroz cocido",alergenos:[]},{nombre:"Huevo",alergenos:["huevo"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Zanahoria",alergenos:[]},{nombre:"Vainita china",alergenos:[]},{nombre:"Pimiento rojo y verde",alergenos:[]},{nombre:"Brotes de soya",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite de sÃ©samo",alergenos:["sÃ©samo"]},{nombre:"Mezcla secreta de especias",alergenos:[]},{nombre:"Cebollino picado",alergenos:[]}],"alÃ©rgenos":["huevo","gluten","soya","sÃ©samo"]},"tallarin-saltado":{nombre:"TallarÃ­n Saltado",imagen:"imagenes/saltado.jpg",precio:"S/ 20.00",descripcion:"Fideos chinos salteados al wok con pollo, carne de res, cebolla morada, tomate, ajÃ­ amarillo y salsa de soya. AcompaÃ±ado de papas fritas por encima.",ingredientes:[{nombre:"Fideos chinos",alergenos:["gluten"]},{nombre:"Pechuga de pollo en tiras",alergenos:[]},{nombre:"Lomo fino de res en tiras",alergenos:[]},{nombre:"Cebolla morada",alergenos:[]},{nombre:"Tomate",alergenos:[]},{nombre:"AjÃ­ amarillo",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Vinagre de arroz",alergenos:[]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Cebollino picado",alergenos:[]},{nombre:"Papas fritas",alergenos:[]}],"alÃ©rgenos":["gluten","soya","sÃ©samo"]},"tortilla-pollo":{nombre:"Tortilla de Pollo",imagen:"imagenes/tortillapollo.png",precio:"S/ 22.00",descripcion:"Arroz chaufa acompaÃ±ado de una generosa porciÃ³n de tortilla de huevo rellena de pollo, cebolla y tomate.",ingredientes:[{nombre:"Arroz chaufa",alergenos:["huevo","gluten","soya","sÃ©samo"]},{nombre:"Huevos",alergenos:["huevo"]},{nombre:"Pechuga de pollo cocida y desmenuzada",alergenos:[]},{nombre:"Cebolla picada",alergenos:[]},{nombre:"Tomate picado",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Aceite vegetal",alergenos:[]},{nombre:"Sal y pimienta al gusto",alergenos:[]},{nombre:"Cebollino picado para decorar",alergenos:[]}],"alÃ©rgenos":["huevo","gluten","soya","sÃ©samo"]},"tallarin-taypa":{nombre:"TallarÃ­n Taypa",imagen:"imagenes/taypa.png",precio:"S/ 28.00",descripcion:"Fideos salteados al wok con combinaciÃ³n de carnes y mariscos, verduras frescas y nuestra salsa especial taypa.",ingredientes:[{nombre:"Fideos chinos",alergenos:["gluten"]},{nombre:"Pechuga de pollo en tiras",alergenos:[]},{nombre:"Lomo fino de res en tiras",alergenos:[]},{nombre:"Camarones",alergenos:["mariscos"]},{nombre:"Trozos de calamar",alergenos:["mariscos"]},{nombre:"Cebolla china",alergenos:[]},{nombre:"Zanahoria",alergenos:[]},{nombre:"Vainita china",alergenos:[]},{nombre:"Pimiento rojo y amarillo",alergenos:[]},{nombre:"Ajo",alergenos:[]},{nombre:"Jengibre",alergenos:[]},{nombre:"Salsa de soya",alergenos:["gluten","soya"]},{nombre:"Salsa de ostiÃ³n",alergenos:["moluscos"]},{nombre:"Salsa taypa especial (secreta)",alergenos:[]},{nombre:"Aceite de ajonjolÃ­",alergenos:["sÃ©samo"]},{nombre:"Cebollino picado",alergenos:[]}],"alÃ©rgenos":["gluten","soya","mariscos","moluscos","sÃ©samo"]}};function crearMiniaturas(e){const o=document.getElementById("miniaturas");if(!o)return;o.innerHTML="";[{nombre:"Vista estÃ¡ndar",filtro:"none"},{nombre:"Vista cercana",transform:"scale(1.2)"},{nombre:"Blanco y negro",filtro:"grayscale(100%)"},{nombre:"Brillo",filtro:"brightness(1.2)"},{nombre:"Contraste",filtro:"contrast(1.2)"}].forEach((a,n)=>{const r=document.createElement("div");r.className="miniatura"+(0===n?" activa":""),r.title=a.nombre;const s=document.createElement("img");s.src=e,s.alt=a.nombre,s.style.filter=a.filtro||"none",s.style.transform=a.transform||"none",s.style.objectPosition=a.objetoPosicion||"center",r.appendChild(s),o.appendChild(r),r.addEventListener("click",()=>{const e=document.querySelector(".producto-imagen img");e&&(e.style.opacity="0",setTimeout(()=>{e.style.filter=a.filtro||"none",e.style.transform=a.transform||"none",e.style.objectPosition=a.objetoPosicion||"center",e.style.opacity="1"},150)),document.querySelectorAll(".miniatura").forEach(e=>e.classList.remove("activa")),r.classList.add("activa")})})}function inicializarGaleria(e){const o=new Image;o.src=e,o.alt="Imagen del producto",o.className="imagen-principal",o.style.opacity="0",o.style.transition="opacity 0.3s ease, transform 0.5s ease",o.onload=function(){const a=document.querySelector(".producto-imagen");if(!a)return;a.innerHTML="",a.appendChild(o);const n=document.createElement("div");n.className="zoom-indicator",n.innerHTML='<i class="fas fa-search-plus"></i>',a.appendChild(n),setTimeout(()=>{o.style.opacity="1"},50),crearMiniaturas(e),a.addEventListener("click",function(){o.classList.contains("zoom-activo")?(o.style.transform="scale(1)",o.classList.remove("zoom-activo"),n.innerHTML='<i class="fas fa-search-plus"></i>',a.style.cursor="zoom-in"):(o.style.transform="scale(1.8)",o.classList.add("zoom-activo"),n.innerHTML='<i class="fas fa-search-minus"></i>',a.style.cursor="zoom-out")}),document.body.style.cursor="default"}}function actualizarCantidad(e){const o=document.getElementById("cantidad");if(!o)return;let a=parseInt(o.value)+e;a<1&&(a=1),o.value=a}function mostrarError(e){const o=document.querySelector(".producto-detalle");o&&(o.innerHTML=`\n      <div class="error-mensaje">\n        <h2>Â¡Ups! Algo saliÃ³ mal</h2>\n        <p>${e}</p>\n        <a href="index2.html#menu" class="btn-volver">\n          <i class="fas fa-arrow-left"></i> Volver al MenÃº\n        </a>\n      </div>\n    `)}function renderizarIngredientes(e){return e&&e.length?`\n    <div class="seccion-ingredientes">\n      <h3><i class="fas fa-list-ul"></i> Ingredientes</h3>\n      <ul class="lista-ingredientes">\n        ${e.map(e=>{const o=e.alergenos&&e.alergenos.length?` <span class="alergeno" title="Contiene ${e.alergenos.join(", ")}">âš ï¸</span>`:"";return`<li class="ingrediente-item">\n            ${e.nombre}${o}\n          </li>`}).join("")}\n      </ul>\n    </div>\n  `:""}function renderizarAlergenos(e){if(!e||!e.length)return"";const o={gluten:"ğŸŒ¾",huevo:"ğŸ¥š",lacteos:"ğŸ¥›",soya:"ğŸŒ±","sÃ©samo":"ğŸŒ°","frutos-secos":"ğŸŒ°",pescado:"ğŸŸ",mariscos:"ğŸ¦",cacahuetes:"ğŸ¥œ",apio:"ğŸ¥¬",mostaza:"ğŸŒ¿",sulfitos:"ğŸ§ª",altramuces:"ğŸŸ¢",moluscos:"ğŸš"};return`\n    <div class="seccion-alergenos">\n      <h4><i class="fas fa-allergies"></i> Contiene:</h4>\n      <div class="alergenos-lista">\n        ${e.map(e=>`<span class="alergeno-tag" title="Contiene ${e}">${o[e]||"âš ï¸"} ${e}</span>`).join(" ")}\n      </div>\n    </div>\n  `}function cargarProducto(){const e=document.getElementById("producto-detalle"),o=document.querySelector(".producto-info h1"),a=document.querySelector(".producto-precio"),n=document.querySelector(".producto-descripcion"),r=document.querySelector(".seccion-ingredientes-container");if(!e)return void mostrarError("No se pudo cargar la pÃ¡gina correctamente.");const s=new URLSearchParams(window.location.search).get("id");s?(document.body.style.cursor="wait",setTimeout(()=>{try{if(s&&productos[s]){const e=productos[s];if(inicializarGaleria(e.imagen),o&&(o.textContent=e.nombre,o.classList.remove("loading")),a){let o=e.precio;/^[^0-9]/.test(o)||(o=`S/ ${o}`),a.innerHTML=`\n            <div class="precio-contenedor">\n              <span class="precio-simbolo">S/</span>\n              <span class="precio-numero">${o.replace(/[^0-9.,]/g,"")}</span>\n            </div>\n          `,a.classList.remove("loading")}n&&(n.textContent=e.descripcion,n.classList.remove("loading")),document.title=`${e.nombre} - Chifa El Punto`;const l=document.querySelector('meta[name="description"]');if(l&&(l.content=`${e.nombre} - ${e.descripcion.substring(0,150)}...`),r){r.innerHTML=`\n            ${e.ingredientes?renderizarIngredientes(e.ingredientes):""}\n            ${e.alÃ©rgenos?renderizarAlergenos(e.alÃ©rgenos):""}\n          `;r.querySelectorAll(".ingrediente-check").forEach(e=>{e.addEventListener("change",function(){const e=this.closest("li");this.checked?e.classList.remove("ingrediente-eliminado"):e.classList.add("ingrediente-eliminado")})})}}else e&&(e.innerHTML='\n            <div class="producto-no-encontrado" style="text-align: center; width: 100%; padding: 50px 20px;">\n              <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: #d32f2f; margin-bottom: 20px;"></i>\n              <h2 style="color: #333; margin-bottom: 15px;">Producto no encontrado</h2>\n              <p style="color: #666; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto;">\n                Lo sentimos, el producto que buscas no estÃ¡ disponible en este momento.\n              </p>\n              <a href="index2.html#menu" class="btn-volver" style="margin-top: 20px;">\n                <i class="fas fa-arrow-left"></i> Volver al MenÃº\n              </a>\n            </div>\n          ')}catch(e){console.error("Error al cargar el producto:",e),mostrarError("OcurriÃ³ un error al cargar la informaciÃ³n del producto.")}finally{document.body.style.cursor="default"}},500)):mostrarError("No se ha especificado un producto.")}function obtenerFavoritos(){const e=localStorage.getItem("favoritos");return e?JSON.parse(e):[]}function guardarFavoritos(e){localStorage.setItem("favoritos",JSON.stringify(e))}function esFavorito(e){return obtenerFavoritos().includes(e)}function toggleFavorito(e,o){const a=obtenerFavoritos(),n=document.getElementById("btn-favorito"),r=n.querySelector("i");if(esFavorito(e)){guardarFavoritos(a.filter(o=>o!==e)),n.classList.remove("activo"),r.classList.remove("fas"),r.classList.add("far"),mostrarMensaje(`"${o}" eliminado de favoritos`)}else a.push(e),guardarFavoritos(a),n.classList.add("activo"),r.classList.remove("far"),r.classList.add("fas"),mostrarMensaje(`"${o}" agregado a favoritos`)}function mostrarMensaje(e){const o=document.querySelector(".mensaje-flotante");o&&o.remove();const a=document.createElement("div");a.className="mensaje-flotante",a.textContent=e,document.body.appendChild(a),setTimeout(()=>{a.style.opacity="1",a.style.transform="translate(-50%, 0)"},10),setTimeout(()=>{a.style.opacity="0",a.style.transform="translate(-50%, 20px)",setTimeout(()=>{a.remove()},300)},3e3)}document.addEventListener("DOMContentLoaded",function(){cargarProducto();const e=document.getElementById("disminuir"),o=document.getElementById("aumentar"),a=document.getElementById("cantidad"),n=document.getElementById("btn-favorito"),r=document.getElementById("btn-carrito");e&&o&&a&&(e.addEventListener("click",()=>actualizarCantidad(-1)),o.addEventListener("click",()=>actualizarCantidad(1)),a.addEventListener("change",function(){this.value<1&&(this.value=1)}));const s=new URLSearchParams(window.location.search).get("id");if(s&&productos[s]){const e=productos[s];if(n){if(esFavorito(s)){n.classList.add("activo");const e=n.querySelector("i");e.classList.remove("far"),e.classList.add("fas")}n.addEventListener("click",o=>{o.preventDefault(),toggleFavorito(s,e.nombre)})}r&&a&&r.addEventListener("click",o=>{o.preventDefault();const n=parseInt(a.value)||1;let r=JSON.parse(localStorage.getItem("carrito"))||[];const l=r.find(e=>e.id===s);l?l.cantidad+=n:r.push({id:s,nombre:e.nombre,precio:parseFloat(e.precio.replace("S/ ","")),imagen:e.imagen,cantidad:n}),localStorage.setItem("carrito",JSON.stringify(r));const i=new StorageEvent("storage",{key:"carrito",newValue:JSON.stringify(r),oldValue:localStorage.getItem("carrito"),storageArea:localStorage,url:window.location.href});window.dispatchEvent(i),mostrarMensaje(`Â¡${n} ${1===n?"unidad":"unidades"} de ${e.nombre} ${1===n?"ha":"han"} sido aÃ±adida${1===n?"":"s"} al carrito!`);const t=document.getElementById("carritoContador"),c=document.getElementById("carritoContenido");if(t){const e=r.reduce((e,o)=>e+o.cantidad,0);t.textContent=e,t.style.display=e>0?"flex":"none"}c&&(c.classList.add("mostrar"),c.style.display="flex",c.style.opacity="1",c.style.transform="translateY(0)","function"==typeof actualizarVistaCarrito&&actualizarVistaCarrito())})}});