function manejarClickCarrito(e){e.preventDefault(),e.stopPropagation();const t=document.querySelector(".producto-info h1")?.textContent||"Producto",n=document.querySelector(".producto-precio .precio-numero")?.textContent||"0",o=parseFloat(n.replace(/[^0-9.]/g,""))||0;let a=parseInt(document.getElementById("cantidad").value)||1;const r=document.querySelector(".producto-imagen img")?.src||"",d=new URLSearchParams(window.location.search).get("id")||"producto";let c=JSON.parse(localStorage.getItem("carrito"))||[];const i=c.find(e=>e.id===d);i?i.cantidad=a:c.push({id:d,nombre:t,precio:o,imagen:r,cantidad:a}),localStorage.setItem("carrito",JSON.stringify(c));const l=document.getElementById("carritoContador");if(l){const e=c.reduce((e,t)=>e+t.cantidad,0);l.textContent=e}const s=document.createElement("div");s.textContent=`ยก${a} ${1===a?"unidad":"unidades"} de ${t} ${1===a?"agregada":"agregadas"} al carrito!`,s.style.position="fixed",s.style.bottom="20px",s.style.right="20px",s.style.backgroundColor="#4CAF50",s.style.color="white",s.style.padding="15px 25px",s.style.borderRadius="5px",s.style.zIndex="1000",s.style.transition="opacity 0.5s",document.body.appendChild(s),setTimeout(()=>{s.style.opacity="0",setTimeout(()=>s.remove(),500)},1500),setTimeout(()=>{window.location.href="menu.html"},1500)}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("btn-carrito");e&&(e.removeEventListener("click",manejarClickCarrito),e.addEventListener("click",manejarClickCarrito));const t=document.getElementById("aumentar"),n=document.getElementById("disminuir"),o=document.getElementById("cantidad");t&&n&&o&&(t.addEventListener("click",()=>{o.value=parseInt(o.value)+1}),n.addEventListener("click",()=>{const e=parseInt(o.value);e>1&&(o.value=e-1)}))});